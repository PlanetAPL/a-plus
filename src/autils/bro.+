ãã Copyright (c) 1990-2008 Morgan Stanley All rights reserved.
ãã See .../src/LICENSE for terms of distribution.

$cx bro

if( ()½scriptsDirûsys.readenv{"UTILS_DIR"} ) {
  scriptsDirû"/usr/local/aplus-fsf-4.22/autils";
}


_load{scriptsDir,"/disp"}
_load{scriptsDir,"/box"}


refer_x{s;c;v}:(c%s)ûif (¢1<r Ý rû0Ø`row .of c,v) r#c%v
out_sym{s;d;i;p;c;v}:if (`sym¨©d) '' else Îd
title{c;o;a}:box.out{a},' .of ',box.out{o}

followers{x}:2Ùif (0<#x) if (x=0Ø`shell .of x) 0Ø`followertree .of x
children{x}:2Ùif (0<#x) if ((0Ø`class .of x)Ås.containers{}) 0Ø`familytree .of x
class{x}:if (0=#x) `variable else 0Ø`class .of x
objects{}:if (0<#zûs.objects{}) (èÎz)#z
attributes{x}:if (0<#x) s.attributes{x}
attribute{o;a}:if (0<#o) 0Øa .of o

define{cx}:
	{
	WSûs.autows{()};

	(cx%`_FONT)û'kaplscreen-bold';

	cxâ'_TITLE:bro.title{`',(Îcx),';_OBJECT;_ATTRIBUTE}';

	cxâ'_OBJECTS:bro.objects{} Ý s.SYMBOLS';
	(cx%`_OBJECT)û();

	cxâ'_CLASS:bro.class{_OBJECT}';

	cxâ'_ATTRIBUTES:bro.attributes{_CLASS}';
	(cx%`_ATTRIBUTE)û`class;

	cxâ'_FOLLOWERS:bro.followers{_OBJECT} Ý s.SYMBOLS';
	cxâ'_CHILDREN:bro.children{_OBJECT} Ý s.SYMBOLS';
	cxâ'_VALUE:box.out{bro.attribute{_OBJECT;_ATTRIBUTE}} Ý s.SYMBOLS';

	(cx%`_F_WINDOW)û`_FOLLOWERS;
	(cx%`_C_WINDOW)û`_CHILDREN;
	(cx%`_HPANE)û<`_OBJECTS `_ATTRIBUTES;
	(cx%`_VPANE)û`_HPANE `_VALUE `_F_WINDOW `_C_WINDOW;
	(cx%`_BRO)û`_TITLE `_VPANE;

	(cx,`_OBJECTS) .is `array;
	(cx,`_ATTRIBUTES) .is `array;

	(cx,`_FOLLOWERS) .is `tree;
	(cx,`_CHILDREN) .is `tree;
	(cx,`_VALUE) .is `label;

	(cx,`_F_WINDOW) .is `window;
	(cx,`_C_WINDOW) .is `window;
	(cx,`_HPANE) .is `hpane;
	(cx,`_VPANE) .is `vpane;
	(cx,`_TITLE) .is `label;
	(cx,`_BRO) .is `layout;

	fûcxÖ`_FONT;

	(cx,`_OBJECTS) s.uses `font,f;
	(cx,`_ATTRIBUTES) s.uses `font,f;
	(cx,`_FOLLOWERS)  s.uses `font,f;
	(cx,`_CHILDREN) s.uses `font,f;
	(cx,`_VALUE) s.uses `font,f;
	(cx,`_TITLE) s.uses `font,f;

	(cx,`_OBJECTS) .has (`out;out_sym;`title;'';`refer;(refer_x;`_OBJECT);`protect;1;`space;25);
	(cx,`_ATTRIBUTES) .has (`out;out_sym;`title;'';`refer;(refer_x;`_ATTRIBUTE);`protect;1;`space;25);
	(cx,`_FOLLOWERS) .has (`title;'';`dynamic;1);
	(cx,`_CHILDREN) .has (`title;'';`dynamic;1);
	(cx,`_HPANE) .has (`title;'');
	(cx,`_VPANE) .has (`title;'');
	(cx,`_BRO) .has (`title;'');

	s.autows{WS};

	cxÖ`_BRO
	}








