ãã Copyright (c) 1990-2008 Morgan Stanley All rights reserved.
ãã See .../src/LICENSE for terms of distribution.


$cx blt

can_{x}:if (0=s.container_type{0Ø`class .of x}) 0 else if (~(1¦#Òval)^0=½valû%x) 0 else 1
can_be{y}:((Ø0Ø¡`class .of¡y)Ås.realClasses{})/y
captures_{x;y}:(Ø`y `x `ys `xs .of x) s.overlaps@1 1 >Ø¡(<`y `x `ys `xs).of¡y
capture_{x;y}:if (0<#x) if (0<#yûcan_be{(y¨x)/y}) if (can_{x}) if (1Åbûcaptures_{x;y}) (%x)[,]ûb/y
release_{x}:if (0<#x) if (can_{paû0Ø`parent .of x}) x .has `naturalsize Ý (%pa)û(pv¨x)/pvû%pa

release{s;c;v}:if (0<#ob Ý obû0Ø`focus .of cÖ`_BUILD) release_{ob}
capture{s;c;v}:capture_{cÖ`_BUILD;(c¨0#ôÖobs)/obs} Ý obsûs.objects{}

define{cx}:
	{
	WSûs.autows{()};

	(cx%`_FONT)û'kaplscreen-bold';

	(cx%`_CAPTURE)û<{capture};
	(cx%`_RELEASE)û<{release};
	(cx%`_CONTROL)û<`_CAPTURE `_RELEASE;
	(cx%`_BUILD)û();
	(cx%`_BLT)û`_CONTROL `_BUILD;

	(cx,`_RELEASE) .is `button;
	(cx,`_CAPTURE) .is `button;
	(cx,`_CONTROL) .is `layout;
	(cx,`_BUILD) .is `layout;
	(cx,`_BLT) .is `layout;

	fûcxÖ`_FONT;

	(cx,`_BUILD) s.uses `titlefont,f;
	(cx,`_CAPTURE) s.uses `titlefont,f;
	(cx,`_RELEASE) s.uses `titlefont,f;

	(cx,`_BUILD) .has (`title;'Build';`C;1;`R;1;`locksize;1;`build;1;`realize;1;`yxs;300 400);
	(cx,`_CAPTURE) .has (`title;'Capture';`acceptfocus;0);
	(cx,`_RELEASE) .has (`title;'Release';`acceptfocus;0);
	(cx,`_CONTROL) .has (`title;'');
	(cx,`_BLT) .has (`title;'');

	s.autows{WS};

	cxÖ`_BLT
	}

